(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[16],{808:function(e,t,n){e.exports=n(469)},809:function(e,t,n){"use strict";function a(e,t,n,a,c,o,r){try{var i=e[o](r),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,c)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(c,o){var r=e.apply(t,n);function i(e){a(r,c,o,i,s,"next",e)}function s(e){a(r,c,o,i,s,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return c}))},817:function(e,t,n){},912:function(e,t,n){"use strict";n.r(t);var a=n(808),c=n.n(a),o=n(809),r=n(29),i=n(30),s=n(32),l=n(31),d=n(1),u=n(4),h=n(33),m=(n(817),n(160),n(77)),p=n(11),j=n(913),b=n(914),f=n(884),O=n(904),x=n(2);function g(e){return Object(x.jsx)(x.Fragment,{children:e.data.map((function(t){return Object(x.jsx)(u.e,{className:"mx-10",style:{boxShadow:"0px 0px 1px 1px #7706AF",borderRadius:"20px"},children:Object(x.jsxs)(u.f,{className:"p-10",children:[Object(x.jsxs)("div",{className:"Ordercard_body",children:[Object(x.jsx)("img",{src:p.c+"Invoice_pics/"+t.invoiceImage,alt:""}),Object(x.jsxs)("p",{children:["OrderID : ",t.invoice_no]})]}),Object(x.jsxs)("p",{style:{marginBottom:"0px"},children:["Bill Amount: ",t.invoiceAmount]}),Object(x.jsxs)("p",{style:{marginBottom:"0px"},children:[Object(x.jsx)(h.a,{name:"cilNotes"})," \xa0Bakery"]}),Object(x.jsxs)("p",{style:{marginBottom:"0px"},children:[Object(x.jsx)(h.a,{name:"cilCalendar"}),"\xa0 22/05/2021"]}),Object(x.jsx)("br",{}),Object(x.jsxs)(u.o,{xs:"12",md:"12",lg:"12",className:"content-center",style:{paddingLeft:"1rem",fontWeight:"bold"},children:[Object(x.jsx)(u.d,{onClick:function(n){return e.handleStatus(t.invoice_no,t.id,n.target.value)},value:"accept",color:"success",className:"addWalletbtn",style:{width:"16rem",height:"2rem",borderBottomLeftRadius:"1rem",borderTopLeftRadius:"1rem",marginLeft:"-1.3rem"},children:"Accept"}),Object(x.jsx)(u.d,{onClick:function(n){return e.openModal(t.invoice_no,t.id,n.target.value)},value:"reject",color:"danger",className:"addWalletbtn",style:{width:"16rem",height:"2rem",borderBottomRightRadius:"1rem",borderTopRightRadius:"1rem",marginLeft:"0.3rem"},children:"Reject"})]})]})})}))})}var v=n(94),y=n.n(v),_=n(58),k={content:{backgroundColor:"white",top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},S="localhost"===document.domain,R=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleStatus=function(){var e=Object(o.a)(c.a.mark((function e(t,n,o){var r,i,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.state.remark,i=p.a+"accept_order",s={status:o,remark:r,invoice_id:n,invoice_no:t},e.next=5,fetch(i,{method:"POST",headers:p.b,body:JSON.stringify(s)});case 5:(l=e.sent).json().then((function(e){console.log(e),console.log(l),402===l.status?(console.log(e.data.required_amount),a.displayRazorpay(e.data.required_amount)):a.componentDidMount()}),(function(e){return console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),a.openModal=function(e,t,n){a.setState({submitted:!0,modalIsOpen:!0,status:n,id:t,invoice_no:e})},a.handleChangeoption=function(e){a.setState({blocking:!0}),Object(m.d)(e).then((function(e){a.setState({orderList:e,blocking:!1})}))},a.handleChange=function(e){a.setState({option:e}),a.handleChangeoption(e)},a.state={orderList:[],status:"",option:"",remark:"",modalIsOpen:!1,submitted:!1,id:"",invoice_no:""},a}return Object(i.a)(n,[{key:"handleStatusR",value:function(){var e=this,t=this.state.remark,n=this.state.id,a=this.state.status,c=this.state.invoice_no,o=p.a+"accept_order",r={status:a,remark:t,id:n,invoice_no:c};fetch(o,{method:"POST",headers:p.b,body:JSON.stringify(r)}).then((function(t){t.json().then((function(){e.setState({modalIsOpen:!1}),e.componentDidMount()}),(function(e){return console.log(e)}))}))}},{key:"componentDidMount",value:function(){var e=this;this.setState({blocking:!0});Object(m.d)("pending").then((function(t){e.setState({orderList:t,blocking:!1}),console.log(t)}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y.a,{isOpen:this.state.modalIsOpen,style:k,contentLabel:"Example Modal",children:Object(x.jsx)(u.O,{className:"justify-content-center",children:Object(x.jsx)(u.o,{md:"12",lg:"12",xl:"12",children:Object(x.jsx)(u.e,{className:"mx-4",children:Object(x.jsxs)(u.f,{className:"p-4",children:[Object(x.jsx)("h3",{children:"Reject"}),Object(x.jsx)("label",{children:"Remark"}),Object(x.jsxs)(u.F,{className:"mb-3",children:[Object(x.jsx)(u.G,{children:Object(x.jsx)(u.H,{children:Object(x.jsx)(h.a,{name:"cil-user"})})}),Object(x.jsx)(u.E,{type:"text",name:"dname",placeholder:"Remark....",autoComplete:"false",onChange:function(t){e.setState({remark:t.target.value})}})]}),Object(x.jsx)(u.d,{type:"submit",value:"add",block:!0,color:"primary",fullWidth:!0,onClick:function(){return e.handleStatusR()},children:"Submit"})]})})})})}),Object(x.jsxs)(u.p,{style:{padding:"10px"},children:[Object(x.jsx)(u.o,{md:"12",lg:"12",xl:"12",style:{marginTop:"-1rem",marginBottom:"2rem"},children:Object(x.jsxs)(f.a,{style:{width:"100%"},children:[Object(x.jsx)(j.a,{id:"demo-simple-select-label",children:"Select Status"}),Object(x.jsxs)(O.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:function(t){return e.handleChange(t.target.value)},children:[Object(x.jsx)(b.a,{value:"pending",children:"Pending"}),Object(x.jsx)(b.a,{value:"accept",children:"Accepted"}),Object(x.jsx)(b.a,{value:"reject",children:"Rejected"})]})]})}),Object(x.jsx)(u.O,{className:"justify-content-center",children:Object(x.jsx)(u.o,{md:"12",lg:"12",xl:"12",style:{padding:"0px"},children:this.state.orderList.data&&this.state.orderList.data.length>0?Object(x.jsx)(g,{data:this.state.orderList.data,handleStatus:this.handleStatus,openModal:this.openModal,option:this.state.option}):"No data found"})})]}),Object(x.jsx)(_.a,{blocking:this.state.blocking})]})}},{key:"loadScript",value:function(e){return new Promise((function(t){var n=document.createElement("script");n.src=e,n.onload=function(){t(!0)},n.onerror=function(){t(!1)},document.body.appendChild(n)}))}},{key:"displayRazorpay",value:function(){var e=Object(o.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadScript("https://checkout.razorpay.com/v1/checkout.js");case 2:if(e.sent){e.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 6:n={key:S?"rzp_test_wOGiV1gpEDUQrb":"PRODUCTION_KEY",currency:"INR",amount:Number(t+"00"),image:"https://scontent.famd4-1.fna.fbcdn.net/v/t1.6435-9/118735517_106259321210134_6609537456866208869_n.jpg?_nc_cat=108&ccb=1-3&_nc_sid=973b4a&_nc_ohc=OIXJOQyvfYAAX8g-uYI&_nc_ht=scontent.famd4-1.fna&oh=32147705a68745ef4c204efc1eb9c97e&oe=60D201C5",handler:function(e){var n=p.a+"accept_order",a={transaction_id:e.razorpay_payment_id,vendor_id:localStorage.getItem("user_id"),amount:Number(t)};fetch(n,{method:"POST",headers:p.b,body:JSON.stringify(a)}).then((function(e){e.json().then((function(){}),(function(e){return console.log(e)}))}))},prefill:{email:"sdfdsjfh2@ndsfdf.com",phone_number:"9899999999"}},new window.Razorpay(n).open();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d.Component);t.default=R}}]);
//# sourceMappingURL=16.1af3e900.chunk.js.map